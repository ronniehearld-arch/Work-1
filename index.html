<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tracker Pro v6.8.0 - Full Heavy-Duty Clinical Build</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* FULL CSS - NO MINIFICATION - NO SHORT-HAND */
        .active-tab-indicator { 
            border-bottom-width: 4px;
            border-bottom-style: solid;
            border-bottom-color: #4f46e5;
            color: #4f46e5;
            font-weight: 900;
        } 
        
        .hidden-element { 
            display: none !important; 
        }
        
        /* SBT DATA ENTRY GRID - EXACT HANDOUT SPECIFICATIONS */
        .sbt-grid-container { 
            display: grid; 
            grid-template-columns: 2fr 1fr; 
            column-gap: 1px;
            row-gap: 1px;
            background-color: #000000; 
            border-width: 2px;
            border-style: solid;
            border-color: #000000; 
            border-radius: 12px; 
            overflow: hidden; 
            margin-bottom: 12px;
        }

        .grid-column-header { 
            background-color: #f3f4f6; 
            color: #111827;
            font-size: 11px; 
            font-weight: 900; 
            text-transform: uppercase; 
            padding-top: 15px;
            padding-bottom: 15px;
            padding-left: 5px;
            padding-right: 5px;
            text-align: center; 
            border-bottom-width: 1px;
            border-bottom-style: solid;
            border-bottom-color: #000000;
        }

        .grid-input-cell { 
            background-color: #ffffff; 
            padding-top: 0px;
            padding-bottom: 0px;
            padding-left: 0px;
            padding-right: 0px;
            font-weight: 900; 
            font-size: 14px; 
            text-align: center; 
            cursor: pointer; 
            display: flex; 
            align-items: stretch; 
            justify-content: center;
            text-transform: uppercase;
            min-height: 80px;
        }

        .engagement-cell { 
            background-color: #f9fafb; 
            color: #4f46e5; 
            border-left-width: 1px;
            border-left-style: solid;
            border-left-color: #000000; 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* CLINICAL SYMBOL BOXES */
        .symbol-sub-box {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 1px solid #eeeeee;
        }
        .symbol-sub-box:last-child {
            border-right: none;
        }
        .symbol-sub-box:active {
            background-color: #f3f4f6;
        }
        .sym-label {
            font-size: 8px;
            color: #9ca3af;
            margin-top: 2px;
        }

        /* REPLICA DATA SHEET TABLE */
        .replica-sheet-container { 
            border-width: 2px;
            border-style: solid;
            border-color: #000000; 
            background-color: #ffffff; 
            margin-bottom: 25px; 
        }

        .replica-sheet-row { 
            display: flex; 
            border-bottom-width: 1px;
            border-bottom-style: solid;
            border-bottom-color: #000000; 
        }

        .replica-sheet-row:last-child { 
            border-bottom-width: 0px; 
        }

        .replica-sheet-header { 
            background-color: #f3f4f6; 
            font-weight: 900; 
            text-transform: uppercase; 
            font-size: 10px; 
            padding: 6px; 
            border-right-width: 1px;
            border-right-style: solid;
            border-right-color: #000000; 
            text-align: center; 
        }

        .replica-sheet-cell { 
            flex: 1; 
            border-right-width: 1px;
            border-right-style: solid;
            border-right-color: #000000; 
            padding-top: 8px;
            padding-bottom: 8px;
            padding-left: 2px;
            padding-right: 2px;
            font-size: 11px; 
            text-align: center; 
            font-weight: 700; 
        }

        .replica-sheet-cell:last-child { 
            border-right-width: 0px; 
        }
    </style>
</head>
<body class="bg-gray-100 font-sans pb-24 text-gray-900 select-none">

    <div id="version-header" onclick="exitToUserSelection()" class="bg-black text-white text-[10px] font-bold text-center py-2 uppercase sticky top-0 z-[150] tracking-widest cursor-pointer">
        Tracker Pro v6.8.9 | Full Heavy-Duty Build | (Switch User)
    </div>

    <div id="main-application-container" class="hidden-element min-h-screen">
        <div class="bg-white sticky top-8 z-50 shadow-md">
            <div class="flex justify-between p-3 bg-gray-50 border-b text-[10px] font-black uppercase">
                 <button onclick="exitToFolderSelection()" class="text-blue-600 font-bold px-2">‚¨Ö BACK TO FOLDERS</button>
                 <span id="current-user-label" class="text-gray-400"></span>
            </div>
            <div class="flex border-b">
                <button onclick="switchTab('baseline')" id="tab-button-baseline" class="p-4 flex-1 text-[11px] font-bold uppercase transition-all">Baseline</button>
                <button onclick="switchTab('treatment')" id="tab-button-treatment" class="p-4 flex-1 text-[11px] font-bold uppercase transition-all">Treatment</button>
                <button onclick="switchTab('maintenance')" id="tab-button-maintenance" class="p-4 flex-1 text-[11px] font-bold uppercase transition-all">Maintenance</button>
            </div>
        </div>

        <div id="main-task-list" class="p-4 space-y-3 pb-24 max-w-md mx-auto"></div>

        <div class="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around items-center p-3 shadow-lg z-50">
            <button onclick="switchTab('trials')" id="nav-button-trials" class="flex flex-col items-center w-1/4">
                <span class="text-xl">üìä</span>
                <span class="text-[8px] font-black uppercase mt-1">Trial Sheet</span>
            </button>
            <button onclick="switchTab('mastered')" id="nav-button-mastered" class="flex flex-col items-center w-1/4">
                <span class="text-xl">üèÜ</span>
                <span class="text-[8px] font-black uppercase mt-1">Mastered</span>
            </button>
            <button onclick="switchTab('ta_history')" id="nav-button-ta_history" class="flex flex-col items-center w-1/4">
                <span class="text-xl">üìù</span>
                <span class="text-[8px] font-black uppercase mt-1">TA Logs</span>
            </button>
            <button onclick="switchTab('recall')" id="nav-button-recall" class="flex flex-col items-center w-1/4">
                <span class="text-xl">üìã</span>
                <span class="text-[8px] font-black uppercase mt-1">Recall</span>
            </button>
        </div>
    </div>

    <div id="sbt-entry-interface" class="hidden-element fixed inset-0 bg-white z-[220] p-4 text-center flex flex-col overflow-y-auto">
        <div class="flex justify-between items-center pt-8 mb-4">
            <div id="current-session-status" class="bg-indigo-600 text-white px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest">Session Active</div>
            <button onclick="openUndoHistoryModal()" class="bg-gray-800 text-white px-4 py-2 rounded-full font-black text-[10px] uppercase shadow-md">Undo Entry</button>
        </div>
        
        <div class="mb-4 bg-gray-50 py-4 rounded-2xl border border-gray-100 shadow-inner">
            <span id="sbt-stopwatch-display" class="text-5xl font-black font-mono text-indigo-600">00:00</span>
        </div>

        <div class="bg-white p-6 rounded-[35px] border-4 border-blue-500 mb-6 flex items-center justify-center min-h-[100px] shadow-xl">
            <h2 id="active-task-name-display" class="text-2xl font-black uppercase text-gray-800 tracking-tight leading-none"></h2>
        </div>
        
        <div id="sbt-grid-buttons" class="flex flex-col">
            <div class="sbt-grid-container shadow-2xl">
                <div class="grid-column-header">Response (‚óã / P / -)</div>
                <div class="grid-column-header italic text-indigo-600">Engaged</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã FCR')">‚óã<span class="sym-label">FCR</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P FCR')">P<span class="sym-label">FCR</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- FCR')">-<span class="sym-label">FCR</span></div>
                </div>
                <div onclick="recordSbtResponse('FCR+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã TR')">‚óã<span class="sym-label">TR</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P TR')">P<span class="sym-label">TR</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- TR')">-<span class="sym-label">TR</span></div>
                </div>
                <div onclick="recordSbtResponse('TR+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã CAB-1')">‚óã<span class="sym-label">CAB-1</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P CAB-1')">P<span class="sym-label">CAB-1</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- CAB-1')">-<span class="sym-label">CAB-1</span></div>
                </div>
                <div onclick="recordSbtResponse('CAB-1+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã CAB-2')">‚óã<span class="sym-label">CAB-2</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P CAB-2')">P<span class="sym-label">CAB-2</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- CAB-2')">-<span class="sym-label">CAB-2</span></div>
                </div>
                <div onclick="recordSbtResponse('CAB-2+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã CAB-3')">‚óã<span class="sym-label">CAB-3</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P CAB-3')">P<span class="sym-label">CAB-3</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- CAB-3')">-<span class="sym-label">CAB-3</span></div>
                </div>
                <div onclick="recordSbtResponse('CAB-3+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã CAB-4')">‚óã<span class="sym-label">CAB-4</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P CAB-4')">P<span class="sym-label">CAB-4</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- CAB-4')">-<span class="sym-label">CAB-4</span></div>
                </div>
                <div onclick="recordSbtResponse('CAB-4+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div class="grid-input-cell">
                    <div class="symbol-sub-box" onclick="recordSbtResponse('‚óã CAB-5')">‚óã<span class="sym-label">CAB-5</span></div>
                    <div class="symbol-sub-box" style="color:#b45309; background-color:#fffbeb;" onclick="recordSbtResponse('P CAB-5')">P<span class="sym-label">CAB-5</span></div>
                    <div class="symbol-sub-box" style="color:#dc2626; background-color:#fef2f2;" onclick="recordSbtResponse('- CAB-5')">-<span class="sym-label">CAB-5</span></div>
                </div>
                <div onclick="recordSbtResponse('CAB-5+ENG')" class="grid-input-cell engagement-cell">ENG</div>

                <div onclick="recordSbtResponse('R1')" class="grid-input-cell text-red-600 border-t border-black" style="padding:20px;">R1 (DANGER)</div>
                <div onclick="recordSbtResponse('R2')" class="grid-input-cell text-orange-500 border-t border-black" style="padding:20px;">R2 (NON-D)</div>
            </div>
            <button onclick="recordSbtResponse('EO/NO-RESPONSE')" class="w-full py-5 border-2 border-dashed border-gray-400 text-gray-400 font-black text-[11px] rounded-2xl uppercase italic tracking-widest mb-6 active:bg-gray-50">
                EO / NO RESPONSE
            </button>
        </div>

        <button onclick="closeSbtSession()" class="text-gray-400 font-bold uppercase text-[10px] mb-12 underline tracking-widest">Close Session</button>
    </div>

    <script>
        let currentUserId = "";
        let currentFolderId = "";
        let currentActiveTab = "baseline";
        let activeTaskObject = null;
        let sbtStopwatchInterval = null;
        let sbtTotalSeconds = 0;

        function getDatabaseRecords() {
            let databaseKey = "data_store_" + currentUserId + "_" + currentFolderId;
            let encodedData = localStorage.getItem(databaseKey);
            if (encodedData === null) {
                return [];
            } else {
                return JSON.parse(encodedData);
            }
        }

        function saveDatabaseRecords(dataArray) {
            let databaseKey = "data_store_" + currentUserId + "_" + currentFolderId;
            let encodedData = JSON.stringify(dataArray);
            localStorage.setItem(databaseKey, encodedData);
        }

        function showElement(elementId) {
            document.getElementById(elementId).classList.remove('hidden-element');
        }

        function hideElement(elementId) {
            document.getElementById(elementId).classList.add('hidden-element');
        }

        function initializeApplication() {
            currentUserId = localStorage.getItem('app_user_id');
            currentFolderId = localStorage.getItem('app_folder_id');
            currentActiveTab = localStorage.getItem('app_active_tab');
            
            if (currentActiveTab === null) {
                currentActiveTab = "baseline";
            }

            if (currentUserId !== null && currentFolderId !== null) {
                loadMainInterface();
            } else if (currentUserId !== null) {
                renderFolderSelectionScreen();
            } else {
                renderUserSelectionScreen();
            }
        }

        function loadMainInterface() {
            hideElement('user-selection-screen');
            hideElement('folder-selection-screen');
            showElement('main-application-container');
            document.getElementById('current-user-label').innerText = currentUserId + " | " + currentFolderId;
            refreshViewContent();
        }

        function switchTab(tabId) {
            currentActiveTab = tabId;
            localStorage.setItem('app_active_tab', tabId);
            stopSbtStopwatch();
            hideElement('sbt-entry-interface');
            showElement('main-application-container');
            refreshViewContent();
        }

        function refreshViewContent() {
            const container = document.getElementById('main-task-list');
            container.innerHTML = '';
            
            // Update Tab Button Visuals
            let tabs = ['baseline', 'treatment', 'maintenance'];
            for (let i = 0; i < tabs.length; i++) {
                let btn = document.getElementById('tab-button-' + tabs[i]);
                if (btn) {
                    btn.classList.remove('active-tab-indicator');
                }
            }
            
            let activeTabBtn = document.getElementById('tab-button-' + currentActiveTab);
            if (activeTabBtn) {
                activeTabBtn.classList.add('active-tab-indicator');
            }
            
            let allRecords = getDatabaseRecords();

            if (currentActiveTab === 'baseline' || currentActiveTab === 'treatment' || currentActiveTab === 'maintenance') {
                // INPUT BLOCK
                container.innerHTML = `
                    <button onclick="startGeneralSession()" class="w-full bg-indigo-600 text-white py-5 rounded-[25px] font-black uppercase text-sm shadow-xl mb-6 border-b-4 border-indigo-900 active:border-b-0 active:translate-y-1 transition-all">
                        ‚ö° Open SBT Data Sheet ‚ö°
                    </button>
                    <div class="bg-white p-6 rounded-[35px] shadow-md border border-gray-100 mb-6">
                        <input id="new-task-input-field" type="text" placeholder="NAME NEW TASK..." class="w-full p-4 border-2 border-gray-50 rounded-2xl mb-4 uppercase font-black outline-none text-sm focus:border-indigo-400">
                        <button onclick="createNewTaskRecord()" class="w-full bg-blue-600 text-white py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-lg">+ Add To List</button>
                    </div>`;

                let filteredTasks = allRecords.filter(function(record) {
                    return record.folder === currentActiveTab && record.result === undefined;
                });

                for (let j = 0; j < filteredTasks.length; j++) {
                    let task = filteredTasks[j];
                    container.innerHTML += `
                        <div class="bg-white p-5 rounded-[32px] border border-gray-50 flex justify-between items-center mb-3 shadow-sm">
                            <div onclick="startTaskSession(${task.id})" class="flex-1 font-black uppercase text-sm py-2 cursor-pointer text-gray-800">${task.title}</div>
                            <button onclick="deleteTaskRecord(${task.id})" class="text-red-200 hover:text-red-500 font-bold px-3 transition-colors">‚úï</button>
                        </div>`;
                }
            } else if (currentActiveTab === 'trials') {
                container.innerHTML = `<h2 class="text-xl font-black uppercase mb-4 italic tracking-tight text-center">SBT Handout Replica</h2>`;
                
                let trialLogs = allRecords.filter(function(r) { return r.result !== undefined; });
                
                // Group trials into blocks of 5 to match handout rows
                for (let k = 0; k < trialLogs.length; k += 5) {
                    let trialChunk = trialLogs.slice(k, k + 5);
                    let replicaHtml = `<div class="replica-sheet-container shadow-md">
                        <div class="replica-sheet-row">
                            <div class="replica-sheet-header" style="flex: 0 0 35px;">Tr#</div>
                            <div class="replica-sheet-header" style="flex: 1;">EO</div>
                            <div class="replica-sheet-header" style="flex: 2;">Response (SR)</div>
                            <div class="replica-sheet-header" style="flex: 0 0 40px;">Eng</div>
                            <div class="replica-sheet-header" style="flex: 1;">Timer</div>
                        </div>`;
                    
                    for (let m = 0; m < trialChunk.length; m++) {
                        let entry = trialChunk[m];
                        let resultParts = entry.result.split(' (');
                        let isEngaged = resultParts[0].includes('ENG');
                        let cleanResponse = resultParts[0].replace('+ENG', '');
                        let capturedTime = resultParts[1] ? resultParts[1].replace(')', '') : '--:--';
                        
                        replicaHtml += `
                        <div class="replica-sheet-row">
                            <div class="replica-sheet-cell" style="flex: 0 0 35px;">${k + m + 1}</div>
                            <div class="replica-sheet-cell" style="flex: 1;">SD/EO</div>
                            <div class="replica-sheet-cell uppercase font-black" style="flex: 2;">${cleanResponse}</div>
                            <div class="replica-sheet-cell uppercase font-black" style="flex: 0 0 40px;">${isEngaged ? 'YES' : 'NO'}</div>
                            <div class="replica-sheet-cell" style="flex: 1;">${capturedTime}</div>
                        </div>`;
                    }
                    replicaHtml += `</div>`;
                    container.innerHTML += replicaHtml;
                }
            }
        }

        function startGeneralSession() {
            activeTaskObject = { id: Date.now(), title: "QUICK SESSION" };
            openSbtInterface();
        }

        function startTaskSession(taskId) {
            let records = getDatabaseRecords();
            for (let i = 0; i < records.length; i++) {
                if (records[i].id === taskId) {
                    activeTaskObject = records[i];
                }
            }
            openSbtInterface();
        }

        function openSbtInterface() {
            showElement('sbt-entry-interface');
            hideElement('main-application-container');
            document.getElementById('active-task-name-display').innerText = activeTaskObject.title;
            startSbtStopwatch();
        }

        function recordSbtResponse(responseValue) {
            let records = getDatabaseRecords();
            let timeString = document.getElementById('sbt-stopwatch-display').innerText;
            let fullResultString = responseValue + " (" + timeString + ")";
            
            let newLogEntry = {
                id: Date.now(),
                title: activeTaskObject.title,
                result: fullResultString,
                folder: 'recall',
                date: new Date().toLocaleDateString()
            };
            
            records.push(newLogEntry);
            saveDatabaseRecords(records);
            startSbtStopwatch(); // Reset for next trial
        }

        function startSbtStopwatch() {
            if (sbtStopwatchInterval !== null) {
                clearInterval(sbtStopwatchInterval);
            }
            sbtTotalSeconds = 0;
            document.getElementById('sbt-stopwatch-display').innerText = "00:00";
            
            sbtStopwatchInterval = setInterval(function() {
                sbtTotalSeconds = sbtTotalSeconds + 1;
                let minutes = Math.floor(sbtTotalSeconds / 60);
                let seconds = sbtTotalSeconds % 60;
                
                let minuteString = minutes.toString();
                if (minutes < 10) { minuteString = "0" + minuteString; }
                
                let secondString = seconds.toString();
                if (seconds < 10) { secondString = "0" + secondString; }
                
                document.getElementById('sbt-stopwatch-display').innerText = minuteString + ":" + secondString;
            }, 1000);
        }

        function stopSbtStopwatch() {
            if (sbtStopwatchInterval !== null) {
                clearInterval(sbtStopwatchInterval);
                sbtStopwatchInterval = null;
            }
        }

        function closeSbtSession() {
            stopSbtStopwatch();
            hideElement('sbt-entry-interface');
            showElement('main-application-container');
            refreshViewContent();
        }

        function createNewTaskRecord() {
            let taskName = document.getElementById('new-task-input-field').value;
            if (taskName.trim() === "") { return; }
            
            let records = getDatabaseRecords();
            let newTask = {
                id: Date.now(),
                title: taskName.toUpperCase(),
                folder: currentActiveTab
            };
            
            records.push(newTask);
            saveDatabaseRecords(records);
            document.getElementById('new-task-input-field').value = "";
            refreshViewContent();
        }

        function deleteTaskRecord(taskId) {
            let records = getDatabaseRecords();
            let updatedRecords = [];
            for (let i = 0; i < records.length; i++) {
                if (records[i].id !== taskId) {
                    updatedRecords.push(records[i]);
                }
            }
            saveDatabaseRecords(updatedRecords);
            refreshViewContent();
        }

        function openUndoHistoryModal() {
            let records = getDatabaseRecords();
            for (let i = records.length - 1; i >= 0; i--) {
                if (records[i].result !== undefined) {
                    records.splice(i, 1);
                    break;
                }
            }
            saveDatabaseRecords(records);
            alert("Last Entry Removed");
        }

        function exitToUserSelection() {
            localStorage.removeItem('app_user_id');
            location.reload();
        }

        function exitToFolderSelection() {
            localStorage.removeItem('app_folder_id');
            location.reload();
        }

        // Initialize on Load
        initializeApplication();
    </script>

    <div id="user-selection-screen" class="fixed inset-0 bg-indigo-950 z-[100] p-8 flex flex-col items-center hidden-element">
        <h1 class="text-white font-black text-4xl mb-12 mt-12 uppercase italic tracking-tighter underline decoration-indigo-500">Tracker Pro</h1>
        <div id="user-list-container" class="w-full max-w-xs space-y-3 mb-8"></div>
        <div class="w-full max-w-xs bg-white/10 p-6 rounded-[35px] backdrop-blur-md border border-white/5">
            <input id="new-user-input" type="text" placeholder="STUDENT NAME..." class="w-full p-4 rounded-2xl mb-4 uppercase font-black text-center text-sm outline-none">
            <button onclick="createNewUserProfile()" class="w-full bg-green-500 text-white font-black py-4 rounded-2xl shadow-xl uppercase text-xs">+ Create Profile</button>
        </div>
    </div>

    <div id="folder-selection-screen" class="fixed inset-0 bg-gray-100 z-[90] hidden-element p-6 flex flex-col items-center overflow-y-auto">
        <h1 class="font-black text-3xl mb-10 mt-12 uppercase italic text-indigo-950">Folder Access</h1>
        <div id="folder-list-container" class="grid grid-cols-2 gap-4 w-full max-w-md mb-8"></div>
        <div class="w-full max-w-md bg-white p-8 rounded-[40px] shadow-xl border border-gray-200">
            <input id="new-folder-input" type="text" placeholder="FOLDER NAME..." class="w-full p-4 rounded-2xl mb-4 uppercase font-black text-sm outline-none border-2 border-gray-50 focus:border-indigo-400">
            <button onclick="createNewFolder()" class="w-full bg-indigo-600 text-white font-black py-5 rounded-2xl uppercase text-xs shadow-lg tracking-widest">+ Add Folder</button>
        </div>
    </div>

    <script>
        function renderUserSelectionScreen() {
            hideElement('main-application-container');
            showElement('user-selection-screen');
            let users = localStorage.getItem('app_users');
            let userArray = users ? JSON.parse(users) : [];
            const container = document.getElementById('user-list-container');
            container.innerHTML = '';
            for(let i=0; i<userArray.length; i++) {
                let name = userArray[i];
                let btn = document.createElement('button');
                btn.className = "w-full bg-white/20 text-white p-6 rounded-3xl font-black uppercase text-left border border-white/10 shadow-lg active:bg-white/40 transition-colors";
                btn.innerText = name;
                btn.onclick = function() {
                    currentUserId = name;
                    localStorage.setItem('app_user_id', name);
                    renderFolderSelectionScreen();
                };
                container.appendChild(btn);
            }
        }

        function createNewUserProfile() {
            let name = document.getElementById('new-user-input').value.trim().toUpperCase();
            if(!name) return;
            let users = localStorage.getItem('app_users');
            let userArray = users ? JSON.parse(users) : [];
            userArray.push(name);
            localStorage.setItem('app_users', JSON.stringify(userArray));
            document.getElementById('new-user-input').value = "";
            renderUserSelectionScreen();
        }

        function renderFolderSelectionScreen() {
            hideElement('user-selection-screen');
            showElement('folder-selection-screen');
            let folders = localStorage.getItem('app_folders');
            let folderArray = folders ? JSON.parse(folders) : ["SBT", "DTT"];
            const container = document.getElementById('folder-list-container');
            container.innerHTML = '';
            for(let i=0; i<folderArray.length; i++) {
                let fName = folderArray[i];
                let btn = document.createElement('button');
                btn.className = "w-full h-24 bg-white p-4 rounded-3xl shadow-md border-2 border-transparent active:border-indigo-400 font-black uppercase text-indigo-950 transition-all text-sm";
                btn.innerText = fName;
                btn.onclick = function() {
                    currentFolderId = fName;
                    localStorage.setItem('app_folder_id', fName);
                    loadMainInterface();
                };
                container.appendChild(btn);
            }
        }

        function createNewFolder() {
            let fName = document.getElementById('new-folder-input').value.trim().toUpperCase();
            if(!fName) return;
            let folders = localStorage.getItem('app_folders');
            let folderArray = folders ? JSON.parse(folders) : ["SBT", "DTT"];
            folderArray.push(fName);
            localStorage.setItem('app_folders', JSON.stringify(folderArray));
            document.getElementById('new-folder-input').value = "";
            renderFolderSelectionScreen();
        }
    </script>
</body>
</html>
